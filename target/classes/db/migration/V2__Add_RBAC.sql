-- Add IS_SUPERUSER column to USERS table
ALTER TABLE USERS ADD (IS_SUPERUSER CHAR(1) DEFAULT 'N' NOT NULL);

-- Create table specifically for user permissions
CREATE TABLE USER_PERMISSIONS (
    USER_ID VARCHAR2(50) NOT NULL,
    PERMISSION_NAME VARCHAR2(50) NOT NULL,
    CONSTRAINT fk_user_perm FOREIGN KEY (USER_ID) REFERENCES USERS(ID) ON DELETE CASCADE
);

-- Index for performance
CREATE INDEX idx_user_perm_uid ON USER_PERMISSIONS(USER_ID);

-- Set admin as Super User
UPDATE USERS SET IS_SUPERUSER = 'Y' WHERE USERNAME = 'admin';
COMMIT;
